<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Madrus">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>NGINX - Madrus's Docs</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  <link href="../../css/extra.min.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "NGINX";
    var mkdocs_page_input_path = "mac/nginx.md";
    var mkdocs_page_url = "/mac/nginx/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-XXXXXXXX-X', 'auto');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Madrus's Docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">MkDocs Engine</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../engine/technicalities/">Technicalities</a>
                </li>
                <li class="">
                    
    <a class="" href="../../engine/styling/">Styling</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Aurelia</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../aurelia/technicalities/">Technicalities</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">.NET Core</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../dotnet/new_project/">New Project</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dotnet/notes/">Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dotnet/tips/">Tips</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Git</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../git/gitflow/">GitFlow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../git/tools/">Tools</a>
                </li>
                <li class="">
                    
    <a class="" href="../../git/styling/">Styling</a>
                </li>
                <li class="">
                    
    <a class="" href="../../git/ssh/">SSH</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Vue.js</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../vuejs/basics/">Basics</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Mac</span>
    <ul class="subnav">
                <li class=" current">
                    
    <a class="current" href="./">NGINX</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#web-server-on-macbook-pro">Web Server on MacBook Pro</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#nginx">NGINX</a></li>
        
            <li><a class="toctree-l4" href="#anciliary-tools">Anciliary Tools</a></li>
        
        </ul>
    

    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Umbraco</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../umbraco/technicalities/">Technicalities</a>
                </li>
                <li class="">
                    
    <a class="" href="../../umbraco/faq/">FAQ</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Playground</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../playground/todo/">TODOs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../playground/test/">Test Document</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Madrus's Docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Mac &raquo;</li>
        
      
    
    <li>NGINX</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/madrus/kdocs/edit/master/docs/mac/nginx.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="web-server-on-macbook-pro">Web Server on MacBook Pro<a class="headerlink" href="#web-server-on-macbook-pro" title="Permanent link">#</a></h1>
<p>It is possible to run different web servers on a Mac. I prefer <strong>NGINX</strong> to Apache.</p>
<h2 id="nginx">NGINX<a class="headerlink" href="#nginx" title="Permanent link">#</a></h2>
<h3 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">#</a></h3>
<p>Prep work:</p>
<div class="code"><pre><span></span>brew doctor
brew update
brew upgrade
</pre></div>


<p>Installation:</p>
<div class="code"><pre><span></span>brew install nginx
brew services start nginx
brew services stop nginx
</pre></div>


<p>Use these commands to start, stop or restart the nginx server:</p>
<div class="code"><pre><span></span>sudo nginx
sudo nginx -s stop
sudo nginx -s reload
</pre></div>


<h3 id="nginxconf">nginx.conf<a class="headerlink" href="#nginxconf" title="Permanent link">#</a></h3>
<p>In the root of the main HDD, create a new <code>www</code> directory and inside it another two subdirectories: <code>home</code> and <code>sites</code>.</p>
<p>Now, we can edit the <code>nginx.conf</code> file to point the root server at <code>/www/sites</code> and listen on port <code>80</code>. We can use VI or NANO for that:</p>
<div class="code"><pre><span></span>sudo vi /usr/local/etc/nginx/nginx.conf
sudo nano /usr/local/etc/nginx/nginx.conf
</pre></div>


<p>Scroll to the second screen and you will see something like this:</p>
<div class="code"><pre><span></span><span class="n">server</span> <span class="p">{</span>
        <span class="n">listen</span>       <span class="mi">8080</span><span class="p">;</span>
        <span class="n">server_name</span>  <span class="n">localhost</span><span class="p">;</span>

        <span class="c1">#charset koi8-r;</span>

        <span class="c1">#access_log  logs/host.access.log  main;</span>

        <span class="n">location</span> <span class="o">/</span> <span class="p">{</span>
            <span class="n">root</span>   <span class="n">html</span><span class="p">;</span>
            <span class="n">index</span>  <span class="n">index</span><span class="o">.</span><span class="n">html</span> <span class="n">index</span><span class="o">.</span><span class="n">htm</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="o">...</span>
<span class="p">}</span>
</pre></div>


<p>Change <code>8080</code> to <code>80</code> and <code>root html;</code> to <code>/www/sites</code> or whatever other root path we created. </p>
<div class="admonition important">
<p class="admonition-title">Errors 500</p>
<p>There is another chunk of code after <code>location</code>, which deals with <strong>&ldquo;500&rdquo;</strong> errors that also has <code>root html</code> setting. Possibly, it should also be changed in the same way.</p>
</div>
<h2 id="anciliary-tools">Anciliary Tools<a class="headerlink" href="#anciliary-tools" title="Permanent link">#</a></h2>
<h3 id="dsnmasq">dsnmasq<a class="headerlink" href="#dsnmasq" title="Permanent link">#</a></h3>
<p>This is a great little tool that allows us to use wildcard subdomain names. With the default apache settings, we can add as many sites as we like in subfolders of the web root, e.g.:</p>
<ul>
<li>http://home.dev/client1</li>
<li>http://home.dev/client2</li>
<li>http://home.dev/client3</li>
</ul>
<p>However, that creates a problem. When we have each site in a folder, it’s more difficult to manage the settings for each site. Each one must then have a different absolute root. The solution is to create a subdomain for each site, and use URLs like these:</p>
<ul>
<li>http://client1.dev</li>
<li>http://client2.dev</li>
<li>http://client3.dev</li>
</ul>
<p>We can accomplish this by placing all three sites in our <code>/private/etc/hosts</code> file, but then we need to keep adding entries every time we add a new site. </p>
<blockquote>
<p><strong>dnsmasq</strong> allows us to do this by interrupting each request that ends with .dev and forwarding it to a designated IP address (127.0.0.1 in our case).</p>
</blockquote>
<p>The following commands will install <strong>dnsmasq</strong>, configure it to point all requests to the .dev top-level domain to our local machine, and make sure it starts up and runs all of the time.</p>
<div class="code"><pre><span></span>brew install dnsmasq
<span class="nb">cd</span> <span class="k">$(</span>brew --prefix<span class="k">)</span><span class="p">;</span> mkdir etc<span class="p">;</span> <span class="nb">echo</span> <span class="s1">&#39;address=/.dev/127.0.0.1&#39;</span> &gt; etc/dnsmasq.conf
sudo cp -v <span class="k">$(</span>brew --prefix dnsmasq<span class="k">)</span>/homebrew.mxcl.dnsmasq.plist /Library/LaunchDaemons
sudo launchctl load -w /Library/LaunchDaemons/homebrew.mxcl.dnsmasq.plist
sudo mkdir /etc/resolver
sudo bash -c <span class="s1">&#39;echo &quot;nameserver 127.0.0.1&quot; &gt; /etc/resolver/dev&#39;</span>
</pre></div>


<p>If all goes well, we’ll never need to think about it again.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../umbraco/technicalities/" class="btn btn-neutral float-right" title="Technicalities">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../vuejs/basics/" class="btn btn-neutral" title="Basics"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright &copy; 2017 <a href="https://madrus4u.com">Balans4U</a></p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/madrus/kdocs/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../../vuejs/basics/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../umbraco/technicalities/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/require.js"></script>
      <script src="../../search/search.js"></script>

</body>
</html>
